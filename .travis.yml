language: c
compiler:
  - clang
  - gcc
env:
  global:
  - POPPLER_DATA=poppler-data-0.4.8
  matrix:
  # - POPPLER=poppler-0.60.1
  # - POPPLER=poppler-0.48.0 # Travis libglib2.0-dev is too old
  # - POPPLER=poppler-0.47.0
  - POPPLER=poppler-0.23.4
  # https://poppler.freedesktop.org/releases.html
addons:
  apt:
    sources:
    # - ubuntu-toolchain-r-test
    packages:
    # as requested by configure
    # - libopenjp2-7-dev # since Ubuntu 16.04
    - libopenjpeg-dev
    - libgtk-3-dev # optional
    # - zlib1g-dev not the right one
    # - gcc-4.9
install:
- apt-cache policy libglib2.0-dev
- wget https://poppler.freedesktop.org/$POPPLER_DATA.tar.gz
- tar --gzip --extract --file=$POPPLER_DATA.tar.gz
- wget https://poppler.freedesktop.org/$POPPLER.tar.xz
- tar --xz --extract --file=$POPPLER.tar.xz
- ls
- cd $POPPLER
- ls 
- cat INSTALL
- mkdir build
- cd build/
- cmake .. -DCMAKE_INSTALL_PREFIX=/tmp

script:
- make && make install

# poppler-0.60.1
# poppler-0.48.0
# Needs GLib 2.41 (2.40 in Ubuntu 14.04)
